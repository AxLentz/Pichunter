---
trigger: glob
description: "Python 编码标准与类型注解规范"
globs: **/*.py
---

# 规则: Python 开发风格 (Python Style)

> **匹配模式 (Glob)**: `**/*.py`

--------------------------------------------------

## 类型注解 (强制)
- 所有函数签名 **必须** 包含参数和返回值的类型暗示 (Type Hints)。
- 类属性 **必须** 声明类型 (例如：`api_key: Optional[str]`)。
- 使用 `typing` 模块 (`List`, `Optional`, `Union` 等) 处理复杂结构。

--------------------------------------------------

## 文件组织
1. **导包 (Imports)**: 标准库 -> 第三方库 -> 本地模块。
2. **常量**: 使用 UPPER_SNAKE_CASE 命名。
3. **类**: 使用 PascalCase 命名，按依赖顺序排序。
4. **函数**: 使用 lower_snake_case 命名。

--------------------------------------------------

## 特定约束
- **严禁魔术字符串**: 将重复使用的字符串或业务常量提取到模块级常量中。
- **Schemas**: 在 `schemas.py` 中保持自底向上的依赖顺序。
- **逻辑分离**: API 端点保持在 `main.py` 中，业务逻辑保持在 `services/` 中。